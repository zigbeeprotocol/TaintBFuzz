[kernel] Parsing postcond.c (with preprocessing)
[rte:annot] annotating function f
[rte:annot] annotating function g
[rte:annot] annotating function main
/* Generated by Frama-C */
/*@ ensures \result ≡ -\old(x);
    
    behavior pos:
      assumes first_bhv: x ≥ 0;
      ensures \result ≤ 0;
      assigns *y;
    
    behavior neg:
      assumes second_bhv: x < 0;
      ensures \result > 0;
      assigns \nothing;
    
    complete behaviors pos, neg;
    disjoint behaviors pos, neg;
 */
int f(int x, int *y)
{
  int __retres;
  if (x >= 0) *y = x;
  /*@ assert rte: signed_overflow: -2147483647 ≤ x; */
  __retres = - x;
  return __retres;
}

/*@ ensures *\old(x) ≡ \old(y);
    assigns *x; */
void g(int y, int *x)
{
  *x = f(y,& y);
  return;
}

int main(void)
{
  int c;
  int a = 5;
  int b = f(a,& c);
  g(b,& a);
  /*@ assert rte: signed_overflow: -2147483648 ≤ b + a; */
  /*@ assert rte: signed_overflow: b + a ≤ 2147483647; */
  b += a;
  return b;
}


